# SignLLM æ•°æ®å‡†å¤‡æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å°†å·²å¤„ç†çš„æ‰‹è¯­æ•°æ®è½¬æ¢ä¸ºSignLLMæ¡†æ¶å¯ä»¥ä½¿ç”¨çš„æ ¼å¼ã€‚

## ğŸ“‹ æ•°æ®æ¦‚è¿°

æ ¹æ®æ‚¨æä¾›çš„æ•°æ®å¤„ç†è„šæœ¬ï¼Œæ‚¨çš„æ•°æ®å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š

1. **pipeline_demo_01_json2h5.py**: å°†OpenPose JSONæ–‡ä»¶æ‰“åŒ…ä¸ºH5æ ¼å¼
2. **pipeline_demo_02_h5totxt.py**: ä»H5è½¬æ¢ä¸ºTXTï¼Œè¿›è¡Œ3Då§¿æ€å¤„ç†
3. **pipeline_demo_03_txt2skels.py**: ç”Ÿæˆæœ€ç»ˆçš„.skelså’Œ.textæ–‡ä»¶

æœ€ç»ˆå¾—åˆ°çš„æ•°æ®æ ¼å¼ï¼š
- `dev.text`: æ–‡æœ¬æè¿°ï¼ˆ31,047è¡Œï¼‰
- `dev.skels`: éª¨æ¶æ•°æ®ï¼ˆ31,047è¡Œï¼‰
- `dev.files`: æ–‡ä»¶åˆ—è¡¨

## ğŸ”„ æ•°æ®è½¬æ¢æ­¥éª¤

### æ­¥éª¤1: è¿è¡Œæ•°æ®è½¬æ¢è„šæœ¬

```bash
python convert_data_to_signllm.py \
    --data_dir datasets/final_data/final_data \
    --output_dir datasets/signllm_data \
    --splits dev train test \
    --language ASL
```

**å‚æ•°è¯´æ˜ï¼š**
- `--data_dir`: åŒ…å«.textã€.skelsã€.filesæ–‡ä»¶çš„ç›®å½•
- `--output_dir`: SignLLMæ ¼å¼æ•°æ®çš„è¾“å‡ºç›®å½•
- `--splits`: è¦å¤„ç†çš„æ•°æ®é›†åˆ†å‰²ï¼ˆdev, train, testï¼‰
- `--language`: æ‰‹è¯­è¯­è¨€ä»£ç ï¼ˆASL, DGSç­‰ï¼‰

### æ­¥éª¤2: éªŒè¯æ•°æ®è½¬æ¢

```bash
python test_data_conversion.py
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- éªŒè¯æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®
- åˆ†ææ•°æ®ç»Ÿè®¡ä¿¡æ¯
- æµ‹è¯•æ¨¡å‹å…¼å®¹æ€§

### æ­¥éª¤3: å¼€å§‹è®­ç»ƒ

```bash
# ä½¿ç”¨æ‚¨çš„æ•°æ®é…ç½®
python train_signllm.py --config configs/signllm_your_data_config.json

# æˆ–è€…å…ˆè¿è¡Œå°è§„æ¨¡æµ‹è¯•
python demo_train.py
```

## ğŸ“Š æ•°æ®æ ¼å¼è¯´æ˜

### è¾“å…¥æ ¼å¼ï¼ˆæ‚¨çš„æ•°æ®ï¼‰

**dev.skelsæ ¼å¼ï¼š**
```
x1 y1 z1 x2 y2 z2 ... time1 x1 y1 z1 x2 y2 z2 ... time2 ...
```
- æ¯è¡Œä»£è¡¨ä¸€ä¸ªè§†é¢‘åºåˆ—
- æ•°æ®æŒ‰å¸§ç»„ç»‡ï¼Œæ¯å¸§åŒ…å«150ç»´å§¿æ€æ•°æ®
- æ—¶é—´æˆ³ç”¨äºåˆ†éš”ä¸åŒå¸§

**dev.textæ ¼å¼ï¼š**
```
And I call them decorative elements because basically all they're meant to do is to enrich and color the page.
So they don't really have much of a symbolic meaning other than maybe life is richer, life is beautiful...
```
- æ¯è¡Œå¯¹åº”ä¸€ä¸ªæ–‡æœ¬æè¿°
- ä¸.skelsæ–‡ä»¶è¡Œæ•°ä¸€ä¸€å¯¹åº”

### è¾“å‡ºæ ¼å¼ï¼ˆSignLLMæ ¼å¼ï¼‰

è½¬æ¢åçš„ç›®å½•ç»“æ„ï¼š
```
datasets/signllm_data/
â”œâ”€â”€ ASL/
â”‚   â”œâ”€â”€ dev/
â”‚   â”‚   â”œâ”€â”€ sample_000001/
â”‚   â”‚   â”‚   â”œâ”€â”€ text.txt
â”‚   â”‚   â”‚   â””â”€â”€ pose.json
â”‚   â”‚   â”œâ”€â”€ sample_000002/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ test/
â”œâ”€â”€ ASL_dev_index.json
â”œâ”€â”€ ASL_train_index.json
â”œâ”€â”€ ASL_test_index.json
â””â”€â”€ dataset_config.json
```

**pose.jsonæ ¼å¼ï¼š**
```json
{
  "poses": [
    {
      "pose_keypoints_2d": [x1, y1, c1, x2, y2, c2, ...],
      "hand_left_keypoints_2d": [x1, y1, c1, ...],
      "hand_right_keypoints_2d": [x1, y1, c1, ...],
      "face_keypoints_2d": [0.0, 0.0, 0.0, ...]
    },
    ...
  ],
  "num_frames": 50,
  "original_index": 0
}
```

## âš™ï¸ é…ç½®è°ƒæ•´

### è®­ç»ƒé…ç½®ä¼˜åŒ–

æ ¹æ®æ‚¨çš„æ•°æ®ç‰¹ç‚¹ï¼Œå»ºè®®è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š

```json
{
  "data": {
    "batch_size": 4,           // æ ¹æ®GPUå†…å­˜è°ƒæ•´
    "max_sequence_length": 256 // æ ¹æ®æ•°æ®ç»Ÿè®¡è°ƒæ•´
  },
  "training": {
    "epochs": 50,              // å¯ä»¥ä»è¾ƒå°‘epochå¼€å§‹
    "lr": 5e-5                 // è¾ƒå°çš„å­¦ä¹ ç‡
  }
}
```

### æ•°æ®ç»´åº¦è¯´æ˜

æ‚¨çš„æ•°æ®å¤„ç†æµç¨‹ç”Ÿæˆ150ç»´å§¿æ€æ•°æ®ï¼Œåˆ†é…å¦‚ä¸‹ï¼š
- **ä¸Šèº«å…³é”®ç‚¹**: 24ç»´ (8ä¸ªç‚¹ Ã— 3åæ ‡)
- **å·¦æ‰‹å…³é”®ç‚¹**: 63ç»´ (21ä¸ªç‚¹ Ã— 3åæ ‡)  
- **å³æ‰‹å…³é”®ç‚¹**: 63ç»´ (21ä¸ªç‚¹ Ã— 3åæ ‡)
- **æ€»è®¡**: 150ç»´

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q1: æ•°æ®è½¬æ¢å¤±è´¥**
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la datasets/final_data/final_data/

# æ£€æŸ¥æ–‡ä»¶è¡Œæ•°æ˜¯å¦åŒ¹é…
wc -l datasets/final_data/final_data/dev.*
```

**Q2: å†…å­˜ä¸è¶³**
```bash
# å‡å°batch_size
# åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ï¼š
"batch_size": 2
```

**Q3: åºåˆ—é•¿åº¦è¿‡é•¿**
```bash
# è¿è¡Œæ•°æ®ç»Ÿè®¡åˆ†æ
python test_data_conversion.py

# æ ¹æ®95%åˆ†ä½æ•°è°ƒæ•´max_sequence_length
```

### æ•°æ®è´¨é‡æ£€æŸ¥

```python
# æ£€æŸ¥å§¿æ€æ•°æ®èŒƒå›´
import numpy as np

# åŠ è½½ä¸€ä¸ªpose.jsonæ–‡ä»¶
with open('datasets/signllm_data/ASL/dev/sample_000001/pose.json', 'r') as f:
    data = json.load(f)

poses = data['poses']
print(f"å¸§æ•°: {len(poses)}")
print(f"ç¬¬ä¸€å¸§å…³é”®ç‚¹æ•°: {len(poses[0]['pose_keypoints_2d'])}")
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. æ•°æ®é¢„å¤„ç†ä¼˜åŒ–
- ç¡®ä¿å§¿æ€æ•°æ®å·²æ­£ç¡®æ ‡å‡†åŒ–
- ç§»é™¤å¼‚å¸¸å€¼å’Œå™ªå£°å¸§
- è€ƒè™‘æ•°æ®å¢å¼ºæŠ€æœ¯

### 2. è®­ç»ƒä¼˜åŒ–
- ä½¿ç”¨æ¢¯åº¦ç´¯ç§¯å¤„ç†å¤§æ‰¹æ¬¡
- å®æ–½æ—©åœæœºåˆ¶
- ç›‘æ§è®­ç»ƒæŒ‡æ ‡

### 3. æ¨¡å‹è°ƒæ•´
- æ ¹æ®æ•°æ®é‡è°ƒæ•´æ¨¡å‹å¤§å°
- è€ƒè™‘ä½¿ç”¨é¢„è®­ç»ƒæƒé‡
- è°ƒæ•´å­¦ä¹ ç‡è°ƒåº¦ç­–ç•¥

## ğŸ“ ä¸‹ä¸€æ­¥

1. **æ•°æ®è½¬æ¢**: è¿è¡Œè½¬æ¢è„šæœ¬
2. **éªŒè¯æµ‹è¯•**: ç¡®ä¿æ•°æ®æ ¼å¼æ­£ç¡®
3. **å°è§„æ¨¡è®­ç»ƒ**: ä½¿ç”¨demo_train.pyæµ‹è¯•
4. **å®Œæ•´è®­ç»ƒ**: ä½¿ç”¨å®Œæ•´é…ç½®è®­ç»ƒ
5. **è¯„ä¼°æ¨ç†**: æµ‹è¯•æ¨¡å‹æ€§èƒ½

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æ£€æŸ¥æ—¥å¿—è¾“å‡ºä¸­çš„é”™è¯¯ä¿¡æ¯
2. éªŒè¯æ•°æ®æ–‡ä»¶å®Œæ•´æ€§
3. ç¡®è®¤ç¯å¢ƒä¾èµ–å·²æ­£ç¡®å®‰è£…
4. å‚è€ƒquick_start.pyè¿›è¡Œç¯å¢ƒæµ‹è¯•

---

**æ³¨æ„**: è¿™ä¸ªè½¬æ¢è¿‡ç¨‹ä¼šå°†æ‚¨çš„31,047ä¸ªæ ·æœ¬è½¬æ¢ä¸ºSignLLMå¯ä»¥ç›´æ¥ä½¿ç”¨çš„æ ¼å¼ï¼Œè½¬æ¢å®Œæˆåå³å¯å¼€å§‹è®­ç»ƒã€‚ 